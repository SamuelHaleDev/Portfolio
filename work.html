<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Sam's SWE Portfolio</title>
        <link rel="stylesheet" href="css/styles.css" />
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    </head>

    <body>
        <!--Navigation Bar-->
        <div id="nav-placeholder">

        </div>
        <script>
            function selectNavItem(event) {
                console.log("selectNavItem called"); // Debugging log
    
                // Remove 'selected' class from previously selected item
                let removeSelected = document.querySelector(".selected");
                if (removeSelected) {
                    removeSelected.classList.remove('selected');
                }
    
                // Add 'selected' class to the current item
                event.currentTarget.classList.add('selected');
            }
    
            document.addEventListener('DOMContentLoaded', function() {
                console.log("DOM fully loaded and parsed"); // Debugging log
    
                // Using XMLHttpRequest to load nav.html
                const xhr = new XMLHttpRequest();
                xhr.open('GET', 'nav.html', true);
                xhr.onload = function() {
                    if (xhr.status >= 200 && xhr.status < 300) {
                        document.getElementById('nav-placeholder').innerHTML = xhr.responseText;
                        console.log("nav.html loaded successfully"); // Debugging log
    
                        const navItems = document.querySelectorAll('.nav-item a');
                        navItems.forEach(navItem => {
                            navItem.addEventListener('click', function(event) {
                                event.preventDefault(); // Prevent the default anchor behavior
    
                                selectNavItem(event);
    
                                // Allow time for the class change to take effect
                                setTimeout(() => {
                                    window.location.href = event.currentTarget.href;
                                }, 50); // Short delay for class change
                            });
                            console.log("Event listener attached"); // Debugging log
                        });
                    } else {
                        console.log("Error loading nav.html: ", xhr.status, xhr.statusText); // Error handling log
                    }
                };
                xhr.onerror = function() {
                    console.log("Network error while loading nav.html"); // Error handling log
                };
                xhr.send();
            });
        </script>
        <!--end of Navigation Bar-->
    </body>
</html>